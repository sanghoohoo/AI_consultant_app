# 생기부 업로드 기능 테스트 가이드

## 📱 테스트 환경 설정

### 1. 개발 서버 실행

```bash
cd C:\Gradproj\AI_consultant_app\my-app
npx expo start --android
```

- Metro Bundler가 시작되고 안드로이드 에뮬레이터 또는 실제 기기에서 Expo Go 앱이 자동으로 실행됩니다
- QR 코드가 표시되면 실제 기기의 Expo Go 앱에서 스캔할 수도 있습니다

### 2. 안드로이드 에뮬레이터 사용

- Android Studio의 AVD Manager에서 에뮬레이터 실행
- 또는 `npx expo start` 후 터미널에서 `a` 키 입력

---

## ✅ 테스트 체크리스트

### Phase 1: Settings 화면 접근

- [ ] 앱 실행 후 하단 탭에서 "설정" 탭 선택
- [ ] "계정 정보" 섹션 정상 표시 확인
- [ ] "내 정보" 섹션 정상 표시 확인
- [ ] **"📚 생기부 정보" 섹션이 표시되는지 확인**

**예상 결과**:
- 생기부 데이터가 없는 경우: "+ 생기부 PDF 업로드하기" 버튼 표시
- 생기부 데이터가 있는 경우: 요약 정보 + "업로드" 버튼 표시

---

### Phase 2: PDF 파일 선택 테스트

#### 2.1 업로드 UI 열기
- [ ] "생기부 PDF 업로드하기" 또는 "업로드" 버튼 클릭
- [ ] SchoolRecordUpload 컴포넌트가 표시되는지 확인
- [ ] "PDF 파일 선택" 버튼이 보이는지 확인

#### 2.2 파일 선택
- [ ] "PDF 파일 선택" 버튼 클릭
- [ ] 시스템 파일 선택기가 열리는지 확인
- [ ] PDF 파일 선택 (테스트용 생기부 PDF 준비)
- [ ] 선택된 파일명이 표시되는지 확인
- [ ] 파일 크기가 표시되는지 확인 (XX.XX MB)

**오류 테스트**:
- [ ] PDF가 아닌 파일 선택 시 에러 메시지 표시 확인
- [ ] 50MB 이상 파일 선택 시 에러 메시지 확인

---

### Phase 3: 업로드 및 처리 테스트

#### 3.1 업로드 시작
- [ ] "업로드 및 분석 시작" 버튼 클릭
- [ ] 버튼이 "처리 중..." 으로 변경되는지 확인
- [ ] 로딩 스피너가 표시되는지 확인

#### 3.2 진행률 표시
- [ ] 진행률 바가 표시되는지 확인
- [ ] 진행률이 0%에서 시작하는지 확인
- [ ] "PDF 파일 업로드 중..." 메시지 표시 확인
- [ ] 진행률이 점진적으로 증가하는지 확인 (10% → 30% → 100%)
- [ ] 처리 단계별 메시지 변경 확인:
  - "업로드 준비 중..."
  - "PDF 파일 업로드 중..."
  - "생기부 분석 중..."
  - "완료!"

#### 3.3 완료 처리
- [ ] 진행률이 100%에 도달하는지 확인
- [ ] "업로드 완료" Alert 팝업 표시 확인
- [ ] "생기부 데이터가 성공적으로 처리되었습니다" 메시지 확인
- [ ] 레코드 수 표시 확인 (예: "50개 레코드")
- [ ] "확인" 버튼 클릭 후 업로드 UI가 닫히는지 확인

---

### Phase 4: 데이터 표시 확인

#### 4.1 자동 데이터 로드
- [ ] 업로드 완료 후 생기부 섹션에 요약 정보가 표시되는지 확인
- [ ] 다음 정보들이 정확히 표시되는지 확인:
  - [ ] 이름
  - [ ] 학교명
  - [ ] 수상 경력 개수
  - [ ] 내신 평균
  - [ ] 교과 수
  - [ ] 봉사 시간
  - [ ] 독서 활동 수 (권)

#### 4.2 데이터 정확성
- [ ] 표시된 값들이 업로드한 PDF 내용과 일치하는지 확인
- [ ] 숫자 값들이 올바른 형식으로 표시되는지 확인
- [ ] "미입력" 또는 "미계산" 같은 기본값 처리가 적절한지 확인

---

### Phase 5: 재업로드 테스트

#### 5.1 업로드 버튼 토글
- [ ] 데이터가 표시된 상태에서 "업로드" 버튼 클릭
- [ ] SchoolRecordUpload 컴포넌트가 다시 표시되는지 확인
- [ ] "닫기" 버튼으로 변경되는지 확인
- [ ] "닫기" 클릭 시 업로드 UI가 숨겨지는지 확인

#### 5.2 데이터 덮어쓰기
- [ ] 다른 PDF 파일 선택
- [ ] 재업로드 진행
- [ ] 기존 데이터가 새 데이터로 교체되는지 확인

---

### Phase 6: 에러 핸들링 테스트

#### 6.1 파일 형식 오류
**테스트**: JPG, PNG, DOCX 등 PDF가 아닌 파일 선택

- [ ] "파일 형식 오류" Alert 표시
- [ ] "PDF 파일만 선택해주세요" 메시지 확인
- [ ] 업로드 버튼이 비활성화되는지 확인

#### 6.2 파일 크기 오류
**테스트**: 50MB 이상의 PDF 파일 선택

- [ ] "파일 크기 오류" Alert 표시
- [ ] "파일 크기는 50MB 이하여야 합니다" 메시지 확인

#### 6.3 네트워크 오류
**테스트**: 네트워크 연결 끊기 또는 백엔드 서버 중지

- [ ] "네트워크 오류" Alert 표시
- [ ] "서버에 연결할 수 없습니다" 메시지 확인
- [ ] "재시도" 옵션 제공 확인
- [ ] "재시도" 클릭 시 재업로드 시도 확인

#### 6.4 타임아웃 오류
**테스트**: 매우 큰 파일 또는 서버 응답 지연

- [ ] "처리 시간 초과" Alert 표시
- [ ] "잠시 후 다시 시도해주세요" 메시지 확인
- [ ] 진행률이 멈추지 않고 최대 시도 횟수까지 폴링하는지 확인

#### 6.5 인증 오류
**테스트**: 로그아웃 후 다시 로그인하여 토큰 만료 상태 시뮬레이션

- [ ] "인증 오류" Alert 표시
- [ ] "로그인이 만료되었습니다" 메시지 확인

---

### Phase 7: UI/UX 검증

#### 7.1 다크 모드
- [ ] 시스템 설정에서 다크 모드 활성화
- [ ] 생기부 섹션의 색상이 다크 테마로 변경되는지 확인
- [ ] 모든 텍스트가 가독성 있게 표시되는지 확인
- [ ] 버튼 색상이 적절한지 확인

#### 7.2 스크롤 동작
- [ ] Settings 화면에서 스크롤이 부드럽게 동작하는지 확인
- [ ] 생기부 섹션이 다른 섹션과 일관된 간격으로 배치되는지 확인
- [ ] 업로드 UI가 열렸을 때 스크롤 위치가 적절한지 확인

#### 7.3 버튼 상태
- [ ] 파일 미선택 시 업로드 버튼 비활성화 확인
- [ ] 업로드 중 버튼 비활성화 확인
- [ ] 로딩 중 시각적 피드백 확인 (스피너, 색상 변경)

#### 7.4 텍스트 레이아웃
- [ ] 긴 파일명이 적절히 줄바꿈되는지 확인
- [ ] 숫자 값들이 올바른 정렬로 표시되는지 확인
- [ ] 안내사항 텍스트가 읽기 쉽게 표시되는지 확인

---

### Phase 8: 성능 테스트

#### 8.1 메모리 사용
- [ ] 업로드 전후 앱 메모리 사용량 모니터링
- [ ] 큰 PDF 파일 업로드 시 메모리 누수가 없는지 확인
- [ ] 여러 번 업로드해도 성능 저하가 없는지 확인

#### 8.2 응답 속도
- [ ] 파일 선택 후 UI 업데이트가 즉시 이루어지는지 확인
- [ ] 업로드 시작 후 진행률 표시가 지연 없이 시작되는지 확인
- [ ] 완료 후 데이터 로드가 1-2초 내에 완료되는지 확인

#### 8.3 안정성
- [ ] 연속 5회 업로드 테스트 (정상 동작 확인)
- [ ] 앱을 백그라운드로 이동 후 복귀 시 상태 유지 확인
- [ ] 화면 회전 시 상태 유지 확인 (해당되는 경우)

---

## 🐛 알려진 제한사항

1. **파일 크기**: 최대 50MB (백엔드 제한)
2. **처리 시간**: 보통 1-2분 소요 (PDF 크기에 따라 다름)
3. **네트워크 의존성**: 안정적인 인터넷 연결 필요
4. **PDF 형식**: 학교생활기록부 표준 양식만 지원

---

## 📊 테스트 결과 기록

| 테스트 항목 | 결과 | 비고 |
|------------|------|------|
| Settings 화면 접근 | ⬜ | |
| PDF 파일 선택 | ⬜ | |
| 업로드 진행률 표시 | ⬜ | |
| 데이터 자동 로드 | ⬜ | |
| 재업로드 | ⬜ | |
| 파일 형식 오류 핸들링 | ⬜ | |
| 파일 크기 오류 핸들링 | ⬜ | |
| 네트워크 오류 핸들링 | ⬜ | |
| 다크 모드 | ⬜ | |
| UI 일관성 | ⬜ | |

**범례**: ⬜ 미실시 | ✅ 통과 | ❌ 실패 | ⚠️ 부분 통과

---

## 🔧 문제 해결

### 앱이 실행되지 않는 경우

```bash
# 캐시 정리
cd C:\Gradproj\AI_consultant_app\my-app
npx expo start --clear

# 의존성 재설치
rm -rf node_modules
npm install
```

### 파일 선택이 작동하지 않는 경우

- 안드로이드 권한 확인 (설정 > 앱 > 권한)
- 파일 저장소 접근 권한 허용

### 업로드가 실패하는 경우

1. 백엔드 서버가 실행 중인지 확인
2. `.env` 파일의 `EXPO_PUBLIC_API_URL` 확인
3. 네트워크 연결 확인
4. 콘솔 로그 확인 (`npx expo start` 터미널)

### 데이터가 표시되지 않는 경우

1. 업로드가 완전히 완료되었는지 확인
2. 백엔드 로그 확인
3. Supabase 데이터베이스 직접 확인
4. 액세스 토큰 유효성 확인

---

## 📝 추가 테스트 시나리오

### 엣지 케이스

1. **빈 PDF 파일**: 내용이 없는 PDF 업로드
2. **손상된 PDF 파일**: 읽을 수 없는 PDF 업로드
3. **표준 양식이 아닌 PDF**: 다른 형식의 문서 업로드
4. **매우 작은 파일**: 1KB 미만의 PDF
5. **특수 문자 포함 파일명**: 한글, 공백, 특수문자 포함

### 동시성 테스트

1. 여러 사용자가 동시에 업로드
2. 같은 사용자가 여러 기기에서 업로드
3. 업로드 중 앱 종료 후 재시작

---

**작성일**: 2025-10-28
**버전**: 1.0
**작성자**: AI Assistant